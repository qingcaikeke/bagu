**1）五层模型、七层模型**

各层模型的名字、原理；常用的部件和协议；很多面试官会从最基础的问题开始问起，从而考察对整个计算机网络的理解。

应用，表示，会话，传输，网络，数据链路，物理

应用，传输，网络，网络接口-------------------------------------------------------（dhcp：动态获取ip地址，dhcp服务器统一分配和管理IP地址）

**应用**：确定通信的性质，给应用程序或者说用户提供一个统一的接口**（dns，http，HTTPS，dhcp，ftp，smtp）**

**表示**：解决用户信息的**语法表示**问题，确保一个系统的应用层发送的数据能被另一个系统的应用层识别，**如数据转换，压缩加密，解密**。

**会话**：**建立、管理和终止表示层实体之间的通信会话**，如服务器验证**用户登录**

（给消息进行编号，并处理确认应答，全双工保持两个方向的数据独立性）（rpc，socket）

内核：

**传输**（mss段）：网络不同主机上的用户**进程**之间的数据**通信**，可靠与不可靠的传输，传输层的错误检测，流量控制，拥塞控制。

**网络**（mtu包）：通过**IP寻址**来建立两台**主机**之间的**连接**，远程定位，路由选择，实现非同一子网间的数据传输

网络层（IP协议）本身没有传输包的功能，包的实际传输是委托给数据链路层（以太网中的交换机）来实现的**（ip，icmp）**

**数据链路**（帧）：上层数据封帧，用**MAC**地址访问媒介，（arp）

**物理**：物理设备（网卡网线），传输数据帧

链路层的传输能力，会动态变化，受网络环境硬件能力影响

补：mtu的值是协商出来的，一般1500，越大效率越好（有效内容多），但容易阻塞，所以可以ping来测试一个合适的大小，直到ping不到结果显示超时

**补：三张表：路由表，arp缓存表，mac地址表**

以太网是实现局域网的有线网络技术。最常见的局域网即是以太网,通过交换机/集线器连接

同一以太网通过交换机直接发。判断是否同一子网，不是则发给默认网关（路由器的ip地址），arp表查路由器的mac，送到路由器，路由器查路由表，判断要到达目标ip要从哪一端口出去，找到了目标子网后，arp查目标机器的mac地址，送到交换机，查mac地址表，判断从交换机的哪个端口传输**（不知道数据包下一跳发给谁就发给默认网关）**

**补1**：`ICMP` 用于告知网络包传送过程中**产生的错误以及各种控制信息**

**补2**：收到数据存到网卡ringbuffer，触发中断（先硬后软），中断处理函数拿出一个帧交给协议栈，协议栈先看是否是给自己的（ip，mac）

是的话到传输层，传输层取出 TCP 头或 UDP 头，根据四元组「源 IP、源端口、目的 IP、目的端口」 作为标识，找出对应的 Socket，并把数据放到 Socket 的接收缓冲区。应用层程序调用 Socket 接口，将内核的 Socket 接收缓冲区的数据「拷贝」到应用层的缓冲区，然后唤醒用户进程。

**补3**：发送网络数据的时候，涉及几次内存拷贝操作？

1.内存区数据拷贝到socket的缓冲区2.tcp发送为了重传会拷贝（传输层到网络层时）3.**ip层发现大于mtu会分片**，涉及到拷贝。其他均通过指针实现 		socket的接收缓冲区是一个指针,指向这个共享ring buffer

补4：零拷贝：传统的文件传输需要将数据从磁盘拷到内核（dma），内核拷到应用（cpu），然后应用拷到socket，socket拷到网卡，设计4次上下文切换，两次cpu拷贝，零拷贝的话则通过mmap把内核数据映射到应用，发送数据只需，磁盘拷贝到内核（pagecache），然后内核拷到网卡，无需通过cpu拷贝，当然这个过程还涉及到将内核文件描述符和数据长度传给socket，socket告诉应用，以便确定发送进度

**说说一个数据怎么在网络各层分割报文的**

应用层数据包，传输层tcp段，ip包，mac帧

**22）tcp在应用层的应用，udp在应用层的应用呢？ DNS是TCP上层协议吗？**

tcp：HTTP、HTTPS、FTP、SMTP。

udp：DNS（域名系统解析）、DHCP（动态分配ip地址和配置信息）、实时音视频传输

补：为什么dns是udp：为了快速响应，同时udp头部较小，占用网络资源更少，适合dns这种频繁短小的数据交换，可以容忍丢包，实际上dns因为可以使用缓存，不能正常工作的概率低

补：DHCP 交互中，全程都是使用 UDP 广播通信。流程：dhcp发现，提供，请求

**数据链路层有哪些协议？ARP协议的过程？**

ARP 是借助 **ARP 请求与 ARP 响应**两种类型的包确定 MAC 地址的，主机广播发送ARP请求，，里面包含目标主机的ip，所有设备同时收到，如果有某台主机发现与自己的ip相同，就把自己的MAC地址放到ARP响应包发送回去

**补：广播和多播**

广播：本地广播直接广播（不转发） 	多播：**将包发送给特定组内的所有主机**（最后一排上来做题）

由于广播无法穿透路由，若想给其他网段发送同样的包，就可以使用可以穿透路由的多播

**2）http报文首部有哪些，分别代表什么含义**+

包括请求头（url，get/post，版本1.1/2.0）和消息头，响应头

**请求相关**：请求文件路径，token，cookie，响应码

connection（长连接）：keepalive任意一端没有明确提出断开连接，则保持 TCP 连接状态

keepalive_timeout：长连接超时时间，防止不再发送请求的连接浪费资源

**内容相关**：content length（解决粘包）Content-Type（返回的数据格式）: text/html;   Charset=utf-8  Content-Encoding（使用了什么压缩格式）: gzip

**缓存相关**：（强制缓存、协商缓存）协商缓存需要配合强制缓存中 Cache-Control 字段来使用，只有在未能命中强制缓存的时候（过期）才能发起带有协商缓存字段的请求

Cache-Control， 是一个相对时间；第一次请求访问服务器资源时，服务器会在返回这个资源的同时，在 Response 头部加上 Cache-Control，Cache-Control 中设置了过期时间大小  Expires，是一个绝对时间；

If-Modified-Since，Last-Modified（基于时间），Etag，If-None-Match（基于唯一标识）

![image-20240301154158525](C:\Users\16776\AppData\Roaming\Typora\typora-user-images\image-20240301154158525.png)

![image-20240301154220626](C:\Users\16776\AppData\Roaming\Typora\typora-user-images\image-20240301154220626.png)

![image-20240301154426222](C:\Users\16776\AppData\Roaming\Typora\typora-user-images\image-20240301154426222.png)

**3）http与https的区别**

http明文传输，不安全。https解决了：窃听，篡改，冒充，但速度变慢了，消耗服务器资源更多了

http+加密（tls，混合加密）+证书（ca）+完整性检查（摘要算法）=https（保证数据完整安全）

混合加密：非对称加密交换对话密钥，使用对话密钥进行对称加密，加密内容

摘要算法，根据内容算哈希值，无法通过哈希值算出内容，哈希值和消息一同传输，加密对哈希值加密

端口80/443

**16）tls/ssl的原理，握手挥手流程**

浏览器请求服务器公钥，双方协商产生会话密钥，使用会话密钥加密通信。本质上就是使用对称密钥加密信息，为了密钥安全使用非对称加密密钥

1. **客户端Hello**：客户端初始化一个随机数，并给出自己支持的加密算法。

2. **服务器Hello**：服务器选择一个加密算法和数字证书和一个随机数发送给客户端（数字证书中有公钥）。

3. **客户端回应**：客户端验证服务器的数字证书的合法性，取出公钥，生成第三个随机数，用公钥加密发给服务器，同时通知之后的信息使用会话密钥加密。会话密钥由三个随机数和约定的加密算法生成

4. **服务器最后回应**：用私钥解密第三个随机数，生成会话密钥，通知客户端之后使用会话密钥加密。

   注意：保密要求服务器私钥一定不能泄漏

挥手过程包括：

1. **客户端发送关闭通知**：客户端向服务器发送一个关闭通知。
2. **服务器响应关闭通知**：服务器收到关闭通知后发送一个确认通知。
3. **连接关闭**：客户端和服务器都确认连接关闭，关闭TLS/SSL连接。

**补：ca证书流程** 1.服务器将公钥，用途，过期时间等信息发给ca，ca将内容计算成哈希值，使用**私钥对哈希值加密**，接收者也计算内容哈希2，然后使用ca公钥解密哈希1，对比哈希1和2是否相等

**4）http常见的状态码**

2（正常返回，返回无数据，返回部分），3（临时重定向，永久重定向，使用缓存资源），4（请求了非法的资源，不存在的资源），5（功能未实现，网关的后端服务器发生错误，服务器繁忙）

**http的特点是什么？**

基于文本，易于阅读和调试，但相比二进制效率低

灵活可扩展，可传输html，json等，可通过扩展头部支持新的功能

无状态，请求之间相互独立，服务器不会保存之前的信息，需要通过cookie，session等储存状态

**6）http1.0、http1.1、http2.0、http3.0及其各自的区别**

1.1（长连接）2.0（头部压缩，二进制分帧，多路复用，服务器推送）3.基于udp的quic

补：头部压缩：发了多个请求，请求头一样或相似，协议会消除重复的部分

二进制：200（http1.1）->'2''0''0'(http2) ->10001000(直接二百的二进制)

分帧：把http1.1的内容分为头信息帧和数据帧，Frame 是 HTTP/2 最小单位，以二进制压缩格式存放 HTTP/1 中的内容

多路复用：多个 Stream 复用在一条 TCP 连接，不同请求用StreamId区分，接收方根据id组装，不同Stream可以乱序发送，即并发传输stream响应

服务器推送：客户端和服务器双方都可以建立 Stream，客户端请求html，服务器可以主动推送css

补：http2仍存在队头阻塞，是在tcp层，tcp面向字节流，**（一旦发生丢包）**前一个包没到，后面的包只能在缓冲区等待。

虽然分了多个stream，但是在一个 TCP 连接中的**所有的 HTTP 请求都必须等待这个丢了的包被重传回来**

补：http3基于udp的quic实现可靠传输，某个流发生丢包只阻塞这个流，连接建立更快（tcp+tls -> quic内部包含tls）

连接迁移：正常tcp四元组确定一个连接，wifi切到流量，ip变化重现建立连接（3+4握手+慢启动=卡一下），quic通过连接id标记两个端点，同时保留tls密钥等，可以无缝启动新连接

**7）http如何实现长连接**

请求头中加入 `Connection: keep-alive` 实现

**8）http短连接长连接，tcp短连接长连接，二者的关系**

HTTP的短连接和长连接指的是HTTP层面上连接的保持。TCP的短连接和长连接是指TCP层面上连接的保持。HTTP的长连接需要TCP的长连接支持。TCP的短连接和长连接会影响HTTP的短连接和长连接的性能表现。

补：http短连接，完成一次请求响应后释放tcp连接————长连接，一次请求后，后续请求继续使用该连接

keep-alive再http中指长连接，tcp中指保活机制

**9）http断点重传**

每次可以只请求资源的某个部分

传输失败或中断,可以从上次失败的地方继续下载,而不是重新开始。

多线程分块下载。可以开启多个连接从不同位置请求文件,提高下载速度

在 HTTP 请求中,通过 Range 字段指明请求的字节范围;服务器则用 206 Partial Content 状态码返回指定范围的文件部分。

**10）http2.0如何实现多路复用**

http1是请求响应模型，必须完成一个事务（请求响应，才能处理下一个事务）

http2实现了并发传输，通过在一个tcp连接的基础上创建多个stream流，每个stream有独一无二的id用来区分不同消息，将消息分别放到对应的stream里，而不同stream之间是并发传输的，因此不必等待一条消息完全回复完再去回复另一条消息，一个stream阻塞，其他的stream可以正常传输

补：头部压缩，二进制分帧是多路复用的基础

头部压缩：多个请求的头是一样的，会去除重复的部分

二进制分帧：1.1文本格式（200表示为“2”“0”“0”）二进制格式200表示为（11001000），文本格式不好拆分，无法实现并发，二进制可以

同时帧中有stream流id，也可以按优先级处理

xxxxxxxxxx private Lock lock = new ReentrantLock();lock.lock();try {   // 需要同步的操作} finally {    lock.unlock();}HTML

**11）http1.1为什么不能实现多路复用**

HTTP1.1是串行传输的，即同一时间只能处理一个请求，必须等待前一个请求的响应返回后才能发送下一个请求

分完帧每个都得带上完整的头，没有头部压缩数据太大，重复率高

**12）浏览器输入一个URL的全过程**（dns解析，三次握手，请求，响应，解析渲染，断连）

解析url（服务器名称，文件路径），生成http请求，dns真实地址查询（浏览器缓存，操作系统**缓存**，host文件，本地dns，权威dns，根dns）

浏览器调用socket库，委托内核协议栈工作（tcp、ip（icmp，arp）），网卡驱动，物理硬件网卡。服务器处理回复，页面渲染

**13）websocket与http的区别是什么？**

WebSocket是一种全双工通信协议（http1.1半双工），允许服务器向客户端推送消息，实现实时双向通信。

流程：先进行一次http通信，请求升级协议，之后按websocket格式发 **应用场景**：需要浏览器服务器频繁交互的（网页游戏，聊天室）

补：为了实现服务器主动推送： 不断轮询，定时轮询（伪）

**14）cookie和session二者的流程、实现原理和区别**

- **Cookie**：存储在客户端的小段文本信息，由服务器发送到客户端，并随后每次请求发送到服务器。Cookie有过期时间。储存偏好设置等不太敏感的数据
- **Session**：服务器端存储的用户状态信息，通常存储在服务器的内存中，通过id关联不同用户。Session由服务器设置过期时间。储存更敏感的数据（购物车，登录状态等）流程：服务器创建一个session对象和一个id绑定对象，将id发给浏览器，之后请求带上id，服务器根据id找到对象识别身份
- cookie是服务器解析cookie中的内容，session是根据id查找服务器的内容，储存数据更多，安全性更高

**15）如何实现cookie**

服务器接收第一次请求的时候，生成一个cookie，内容可能包括名称、值，过期时间，域名等，而后服务器在响应头加入set——cookie字段，将cookie发送给客户端，之后客户端的请求会在请求头加上这个cookie，以便服务器识别身份

**网络代理正向和反向区别？**

正向代理：客户端向代理服务器发送请求，代理服务器代表客户端向服务器发送请求

用于隐藏用户访问记录，解决跨域问题，绕过网络限制，访问被封锁的网站，目标服务器对代理服务器可见，对客户端不可见，可以缓存请求的资源，提高访问速度

反向代理：客户端向反向代理服务器发送请求，反向代理服务器根据请求的内容和规则，将请求转发给后端的目标服务器

用于负载均衡、高可用性、安全过滤、SSL加密等。

**17）TCP三次握手和四次挥手标志位、状态位、如何用linux命令查看**

标志位状态位？（syn，ack(除最开始一直置1)，rst，fin）（syn-sent,syn-received）

（fin_wait1,fin_wait2,time_wait,closed_wait,last_ack）

netstat

**补：**tcp头：源端口目标端口，序号，确认号，（头部长度，状态位，窗口大小），（校验和，）（可选区：MSS大小、窗口扩大、SACK，对齐数据），因此**tcp头是可变长**的（固定长度20字节，可变长度40字节）而udp头长是固定大小的8字节

**补**：为什么需要 TCP 协议？ TCP 工作在哪一层？希望各层简单专注，IP层不可靠

**补**：什么是tcp？（面向连接可靠字节流的协议）什么又是tcp连接？（保证可靠传输，流量控制等状态信息的组合，包括socket，序列号窗口大小）

**18）tcp和udp的区别、应用场景**

 区别：面向连接，可靠（各种特性），字节流，

头部大小（udp源端口，目标端口，包长度，校验和），tcp有头部长度，没包长度，udp没头部长度，有包长度。

传输速度，多了（连接，确认，重传）更慢  -------  应用场景（http，ftp）（语音视频，dns）

**如何理解TCP的流的概念？tcp粘包？**

tcp是以字节流的形式传输出去的，没有边界，接收到应用层的消息序列化成字节流，放到内核协议栈等待发送，一般一个mtu一个包，而非一条消息一个包，所以会发生沾包，需要在应用层定义消息结构，说明消息的长度，以便于接收方解析，或者是以特殊字符作为边界

如rpc项目，发送的是元数据，元数据有ip和端口号和rpcMess，rpcMess包括header和Mess，header中就有消息长度，是序列化后，计算，填充的

而UDP面向报文传输，每个数据包都是独立的

**20）tcp三次握手，为什么不是两次握手和四次握手**

接收端收到，也随机初始化一个序号，放到序列号，将收到的客户端序列号加一放入确认应答号，syn，ack置1，自己进入syn-received状态。**1.保证双方都具有接收发送能力**

**2.防止历史连接初始化连接**，因为接收方没有中间状态（syn-received）给发送方阻止历史连接，收到syn就建立了一个连接（1.永远不会用，浪费资源2.服务器可能向这个废连接发送消息，白发送）

**3.正确同步双方初始序列号**，两个以来一回，中间的两次可以合并成一次

**4.防止资源浪费**，没有第三次握手，服务器不知道对方是否接到回复的ack，收到一个syn就创建一个连接

补：syn攻击，攻击方伪造不同ip，发送syn报文，占满半连接队列。解决方法：调大缓冲区，调大半连接队列，使用cookie绕过半连接，减少syn-ack重传次数，尽快断开半连接

**为什么要有accept**

三次握手只是在网络**传输层**确立了连接，，应用层没法直接收发，需要有一个内核和应用之间的接口（socket），通过accept()创建已连接socket，并分配资源（缓冲区等），然后返回给应用使用

**21）tcp四次挥手，三次行不行**

发起（fin-wait1,fin-wait2,**time_wait**）被动方(**closed-wait**，last_ack)

两个方向，每个都需要一个fin和一个ack

第一次：客户端不在发送但是可以接收 	第二次：服务器收到，但可能还需要处理发送数据

第三次：服务器处理完成，同意现在关闭连接 	第四次：客户端收到

总结：因为服务器还需要进行最后的数据处理发送，所以服务端的ack和fin一般要分开发送，所以是四次

补：time_wait不会持续很长时间，有一个默认值，超时没收到第三次握手的fin自动关闭连接

服务器重传，客户端收到新的fin后，会重置2msl定时器

**28）time_wait是主动断连方的还是被动断连方的，存在的原因是什么，哪些应用场景要调小time_wait的时间长度**

TIME_WAIT状态是主动断连方的状态。

作用：1.防止历史连接中的数据，被后面相同四元组的连接错误的接收，2msl足以让两个方向的数据包都被丢弃

2.保证「被动关闭连接」的一方，能被正确的关闭，确保ack能被被动关闭方接收进而正常关闭

在高并发、短连接频繁建立的应用场景下，可能会调小TIME_WAIT的时间长度，以减少资源占用。 

**补：**为什么是2msl，一来一回的时间，至少允许报文丢失一次，即客户端必须等待足够长的时间，确保服务端能够收到 ACK，如果服务端没有收到 ACK，那么就会触发 TCP 重传机制，服务端会重新发送一个 FIN，这样一去一来刚好两个 MSL 的时间

补：出现大量time_wait,1.没开启长连接2.长连接超时（网络不好导致服务器一直没收到请求）3.（单个长连接有最大请求数量限制，qps太高就会出现频繁的断开连接，需要调大**keepalive_requests**）

**23）tcp如何保证可靠传输**

1.序列号，确认号（确定已经到达，按序到达）2.超时重传（配合确认号）3.滑动窗口配合流量控制（接收方告知自己接收能力，发送方控制发送速率）4.拥塞控制（动态调整发送方的发送速率，避免网络拥塞）

**24）如何让udp实现可靠传输**



**25）tcp的重传机制**

TCP的重传机制是在发送方发送数据后启动一个定时器，如果在定时器超时时间内未收到接收方的确认应答，发送方会重新发送相同的数据。

**滑动窗口是怎么实现的？**

窗口大小就是指无需等待确认应答，而可以继续发送数据的最大值，发送方会开辟一个缓冲区，再收到确认应答之前，在缓冲区保存发送的数据，如果按期收到，从缓冲区删除，tcp头中有一个字段，用于接收方告诉发送方自己还有多少缓冲区可以接收数据，窗口是大小动态变化的  还会配合累计确认，只要发送方收到了 ACK 700 确认应答，就意味着 700 之前的所有数据全收到了，允许确认应答报文丢失

发送方的滑动窗口分四部分，1.已发送并ack--2.已发送未收到ack--3.未发送但可以发送--4.未发送且超出接收方处理能力

接收方的滑动窗口分三部分，1.已接收并ack--2.还能接收的--3.超出接收能力的

**26）tcp的流量控制**

滑动窗口（Sliding Window）机制实现。接收方通知发送方自己的接收窗口大小，发送方根据这个窗口大小控制发送的数据量，确保不会发送过多的数据导致接收方无法处理

**27）tcp的拥塞控制**

TCP的拥塞控制通过**拥塞窗口**机制实现。发送方根据网络拥塞的程度动态调整拥塞窗口的大小，以控制发送速度。TCP的拥塞控制算法包括慢启动、拥塞避免、快速重传和快速恢复等。一旦发生了超时重传，认为发生网络拥堵，调整窗口大小

慢启动：一开始拥塞窗口较小（慢启动），收到一个ack拥塞窗口加一，每一轮次指数增长，直到达到阈值

拥塞避免：达到慢启动门限，上一轮次所有发出的包都被接收，拥塞窗口加一，每一轮次线性增长

快重传：丢了一个中间包的时候，接收方回复三次前一个包的 ACK，发送方连续收到三个重复的ack，直接重传，不用等待超时

快恢复：发生快重传，还能收到 3 个重复 ACK 说明网络也不那么糟糕，情况不严重，大部分没丢，只丢了一小部分，拥塞窗口大小变为原来的一半，慢启动门限等于，拥塞窗口大小，然后收到重复的ack就把窗口大小加1，以实现将丢失的包尽快发给目标，收到新的ack，拥塞窗口大小变回快恢复发生的时候，即慢启动门限的大小

**29）tcp中，为啥有了流量控制，还需要拥塞控制**

流量控制是为了控制数据的发送速率，确保接收方能够及时处理数据。拥塞控制则是为了避免网络拥塞，保持整体网络的稳定性。即使单个连接进行了流量控制，但在多个连接同时进行数据传输的情况下，仍然可能因为网络拥塞导致数据丢失，因此需要拥塞控制来适应整体网络状况。

**30）接收端如何判断ip数据报是否完整（从网络编程角度）**

补：ip头：版本，首部长度，总长度，标识？标志+片偏移，ttl，上层协议，首部校验和，源ip，目标ip

长度，序号，偏移，校验和

**IP 报文的TTL是什么意思？**

最大跳数，防止路由循环

**31）ping的时候，发生了什么用了哪些协议，源ip和目的ip在过程中是如何变化的**

**Ping命令使用ICMP**（Internet Control Message Protocol）协议进行工作。当你使用Ping测试一个目标主机时，发送端主机会向目标主机发送ICMP Echo Request消息。目标主机收到消息后，会回应一个ICMP Echo Reply消息。记录发送给时间和接收时间

在Ping过程中，源IP地址是发送端主机的IP地址，而目的IP地址是要Ping的目标主机的IP地址。这两个IP地址在整个Ping过程中保持不变。

补：icmp分两类：查询报文类型（request，reply）和差错报文类型（目标不可达，超时，重定向）

可以主动去犯错，以此来获得一些网络相关的信息

**32）如何防止前端发过来的数据被篡改？**

https

**33）md5加解密，可逆嘛？**

MD5是不可逆的哈希函数，它将输入的数据生成一个128位的哈希值，不同的输入会得到不同的哈希值，但无法从哈希值还原出原始数据。因此，MD5是不可逆的，无法进行解密。（产生初始isn？）

**34）对称加密，安全吗**

对称加密使用同一个密钥进行加密和解密。对称加密的安全性取决于密钥的安全性，如果密钥泄露，那么加密的数据就会暴露。因此，在传输密钥的过程中，需要使用其他加密算法，或者使用非对称加密算法来保护密钥的安全。

**35）网络编程中，如何去掉time wait时间**

可以通过设置操作系统的相关参数来调整TIME_WAIT时间。例如，在Linux系统中，可以使用以下命令来修改TIME_WAIT的超时时间

**36）socket的返回值是什么**

返回一个文件描述符（File Descriptor），后续通过这个文件描述符操作socket

文件描述符表是内核管理的一个表格，每一个条目包括一个文件描述和指向所需文件的指针

文件描述符储存在用户空间，进程打开或创建一个文件，内核分配一个文件描述符，并添加对应条目，完成映射，之后以文件描述符为参数，内核根据文件描述符找到文件描述符表，找到对应文件，完成io	

补：epoll基于事件驱动，同时监控多个文件描述符，某个描述符就绪，epoll得到通知（epoll就是监控文件的，看文件是不是发生了io）

补：bind，listen，监听socket注册epoll，三次握手完成进入已连接队列，内核通过回调通知epoll，产生accept事件通知应用，**应用程序**调用accpet，生成一个已连接socket（有缓冲区等资源），已连接socket也注册到epoll，记录连接上的事件，然后返回文件描述符

**37）什么是子网，如何求子网掩码**

子网（Subnet）是将一个大的IP网络划分成若干个小的网络，以提高网络的性能和安全性。子网掩码（Subnet Mask）是一个32位的二进制数，用于区分IP地址中网络部分和主机部分。

确定需要多少主机，判断需要几位主机号，确定要划分几个子网，确定借用几位做子网号

如：需要254个主机，划分四个子网，则应该255.255.255.192

**38）socket通信服务端的流程**（如果要实现一个TCP服务器要哪些（套接字）接口）

服务端创建监听socket，bind，listen，等待连接到来，客户端connect，半连接队列，三次握手后，accept从全连接队列中取出一个连接，分配文件描述符，创建一个已连接socket，返回给应用，之后通过此socket通信

int listen (int socketfd, int backlog)，文件描述符和当前全连接队列长度

补：

网络性能指标：带宽、延时、吞吐率、pps

查看网络配置：ip、ifconfig
 内容包括：IP 地址、子网掩码、MAC 地址、网关地址、MTU 大小、网口的状态以及网络包收发的统计信息

查看协议栈里的信息：socket信息，网口，路由表：netstat、ss

收到的数据包被修改了怎么办：本身有校验和（不提供加密和身份验证），被修改了直接丢，数字签名（私钥加密，公钥解密确保消息来源），tls加密，摘要算法进行完整性检查，

**长链接和短链接的互相转换**

？

**如何衡量网络性能**

网络性能：带宽（链路的最大传输速率），时延，吞吐率（单位时间成功传输的数据量）PPS（单位时间传输包的数量）

