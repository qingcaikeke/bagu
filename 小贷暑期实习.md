[上岸字节了！分享一些 idea (qq.com)](https://mp.weixin.qq.com/s?__biz=MzUxODAzNDg4NQ==&mid=2247527249&idx=1&sn=25c54a80ae53d86528a259840fe6e77b&chksm=f98d2ffbcefaa6edccd86a629f92714b27f8b8525f31bba7dda567f07abaf627bbd4e76f783f&scene=21#wechat_redirect)项目指点

[又被百度捞起来了，能赢吗？ (qq.com)](https://mp.weixin.qq.com/s/1WkJBMMAW1lUZtmWcRQIxQ)合并区间 （排序加双指针），接雨水（动态规划，双指针，单调栈），

[[被字节拷打了！基础还是太重要了... (qq.com)](https://mp.weixin.qq.com/s/EQjV5mBP-0Al1HFFYzOcJA)验证对称二叉树（递归，bfs），岛屿数量（dfs，bfs）

[阿里问的相当基础！ (qq.com)](https://mp.weixin.qq.com/s?__biz=MzUxODAzNDg4NQ==&mid=2247527392&idx=1&sn=b1720341b9685328e7f4de0b8bc5c63a&chksm=f98d2f4acefaa65c04857a67686ba00dd7babe54e2364434328ab9eb1dc4219903f3d46a67fa&scene=21#wechat_redirect)数据库的多表联查

[腾讯面试体验倍儿好 (qq.com)](https://mp.weixin.qq.com/s?__biz=MzUxODAzNDg4NQ==&mid=2247527244&idx=1&sn=54432eaf69b68b2d8cea97c15b9aa578&chksm=f98d2fe6cefaa6f07a5f3532937e5a3c92de2ed516f08861f220e0b1b2ce5735aa90bc233ba5&scene=21#wechat_redirect)链表判断相交

- 大概讲一讲项目
- 讲一下简历里的技术难点

缓存一致性，缓存穿透击穿，全局唯一id，防止超售，redisson，异步秒杀（Redlock算法）

**一人一单：**

补：一般改数据乐观锁，增数据悲观锁

0：需要先扣减库存，再生成订单，为了保证两张表的操作要么全成功要么全失败，加了**事务**注解，而一人一旦过程需要保证一次只能一个线程进入，所以**加锁**

v1：根据优惠券id和用户id查有没有订单，没有，就下单  ——》 问题：并发过来查数据库，都没有订单，导致多次下单，所以需要加锁 

v2: 在方法上加锁，粒度太粗，锁的是整个对象，每个线程进来都会被锁住，而非根据用户加锁

v3：用户id加锁  ——>  方法上加了**事务**，先释放锁后提交事务，还是有并发问题

v4：把方法抽取出来，调用之前加锁，也就是在方法外面加锁 	——》使用this调用，而事务需要使用代理对象来操作方法，否则会失效，本质上是使用aop进行方法增强

v5：先加锁，获取代理对象，调用方法  ——》集群并发问题，分布式环境下锁对象不是一个，都能加锁

v6：加分布式锁，redis setnx实现，防止误删，key用lock：userId，val用uuid+threadId

v7:需要保证判断和删除是原子操作，使用lua脚本实现

**介绍一下面向对象**

面向过程把问题拆分成一个个函数，调用函数执行去解决问题

面向对象先抽象出对象，对象有属性和方法，通过对象去执行方法的方式去解决问题，提供一种模块化，易维护，易扩展的编程方法。

三大特性：继承封装多态

封装就是把对象的状态和行为抽象出来，封装到一个单元中，也就是类，隐藏内部的实现细节，只有通过公用接口才能访问

继承就是子类可以基于父类来进行构建，具有父类的属性方法，并可以通过重写及扩展修改其行为

多态：允许用一个统一的接口表示不同的类型，调用方法时，根据当前对象的实际类型进行调用，实现行为的变化，能灵活得处理不同的对象而不需要关注其具体类型。使代码模块化，易读，易扩展

不用继承能实现多态吗？

多态分继承多态和接口多态，继承多态：动物类有makesound方法，猫类和狗类继承动物类，重写方法，调用时实现多态

动物接口具有makesound方法，猫类和狗类实现这个方法

**怎么实现高并发**

优化数据库和缓存配置。使用读写分离、主从复制等数据库高可用性技术。同时使用Redis等高性能缓存中间件,减少数据库的压力。

使用消息队列。通过消息队列来异步处理任务,提高系统的响应速度。常用的消息队列比如RabbitMQ和Kafka

引入分布式服务框架，利用负载均衡和集群来处理高并发

优化代码。比如减少数据库的IO,使用缓存优化读多写少的模块等。如果存在复杂查询则使用索引优化，合理分库分表
垂直和水平扩展。根据系统瓶颈扩展数据库、应用服务器、缓存等拓展节点,提升每个节点的吞吐能力

限流熔断和降级。通过限流控制对系统的并发访问,防止过载。通过降级保证核心服务可用。

**什么是动态规划**

将问题拆分成相互重叠的子问题，将子问题计算结果储存起来，避免重复计算，

状态转移方程+记忆化储存（斐波那契）

**你觉得同步技术有哪些技术？**

互斥锁，信号量，条件变量，屏障，自旋锁，消息传递







**RPC的流程**

1.调用远程服务器的方法像调用自己的一样

服务端启动服务，完成服务注册

客户端服务订阅，从服务列表中根据据负载均衡选择一个服务地址

生成代理，发起远端过程调用，同时将调用的方法，方法参数序列化成字节流

服务端调用对应的服务

**你的rpc框架接口用什么做约定，知道工业界是怎么做的吗**

自定义的通信协议及编解码器（rpcMessage）

编解码用于解析请求头中的信息，检验魔术，版本号等，检验消息类型**（心跳还是回复）**，拿到序列化算法，根据消息类型，完成消息体的转化（rpcRequest）

```
工厂创建代理，代理（生成字节码，类加载器加载，这个时候他的方法实际上就已经是远端过程调用了，创建对象，调用方法）invoke，RemoteMethodCall封装rpcmessage，服务发现负载均衡得到服务地址，封装metada，rpcClient使用netty异步发送请求，
```

启动 10000 个线程同时访问 sayHello 接口，总共进行 3 轮测试

**序列化和反序列化以及编解码有什么区别**

编解码用于netty发送，序列化反序列化用于接收方和发送方能够理解并还原信息

服务发现--生成桩--序列化--接收--处理

- 常用的RPC框架和他们的区别

grpc：基于http2

dubbo：易于集成spring

thrift



```
谈谈分布式
谈谈分布式一致性算法，tcc，raft
分布式事务一致性问题，介绍一下算法
分布式锁
项目中mysql和redis的用处
项目难点，怎么解决
怎么实现高并发
怎么实现缓存和数据库的数据一致性
redis集群怎么实现,redis主从复制怎么实现，具体的名词和实现
```
